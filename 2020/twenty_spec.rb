require "minitest/autorun"
require "matrix"

require_relative "twenty"

describe DayTwenty do
	let(:input) do
		<<~INPUT
		Tile 2311:
		..##.#..#.
		##..#.....
		#...##..#.
		####.#...#
		##.##.###.
		##...#.###
		.#.#.#..##
		..#....#..
		###...#.#.
		..###..###

		Tile 1951:
		#.##...##.
		#.####...#
		.....#..##
		#...######
		.##.#....#
		.###.#####
		###.##.##.
		.###....#.
		..#.#..#.#
		#...##.#..

		Tile 1171:
		####...##.
		#..##.#..#
		##.#..#.#.
		.###.####.
		..###.####
		.##....##.
		.#...####.
		#.##.####.
		####..#...
		.....##...

		Tile 1427:
		###.##.#..
		.#..#.##..
		.#.##.#..#
		#.#.#.##.#
		....#...##
		...##..##.
		...#.#####
		.#.####.#.
		..#..###.#
		..##.#..#.

		Tile 1489:
		##.#.#....
		..##...#..
		.##..##...
		..#...#...
		#####...#.
		#..#.#.#.#
		...#.#.#..
		##.#...##.
		..##.##.##
		###.##.#..

		Tile 2473:
		#....####.
		#..#.##...
		#.##..#...
		######.#.#
		.#...#.#.#
		.#########
		.###.#..#.
		########.#
		##...##.#.
		..###.#.#.

		Tile 2971:
		..#.#....#
		#...###...
		#.#.###...
		##.##..#..
		.#####..##
		.#..####.#
		#..#.#..#.
		..####.###
		..#.#.###.
		...#.#.#.#

		Tile 2729:
		...#.#.#.#
		####.#....
		..#.#.....
		....#..#.#
		.##..##.#.
		.#.####...
		####.#.#..
		##.####...
		##..#.##..
		#.##...##.

		Tile 3079:
		#.#.#####.
		.#..######
		..#.......
		######....
		####.#..#.
		.#...#.##.
		#.#####.##
		..#.###...
		..#.......
		..#.###...
		INPUT
	end

	it "parses" do
		_(DayTwenty.parse(input).map(&:first).sort).must_equal [
			1171,
			1427,
			1489,
			1951,
			2311,
			2473,
			2729,
			2971,
			3079,
		]
	end

	it "passes" do
		_(DayTwenty.run(input)).must_equal 20899048083289
	end
end
